(this["webpackJsonpfluence-char-count"]=this["webpackJsonpfluence-char-count"]||[]).push([[0],{224:function(e,n,t){},226:function(e,n,t){},285:function(e,n){},286:function(e,n){},334:function(e,n){},411:function(e,n){},468:function(e,n){},490:function(e,n){},532:function(e,n,t){"use strict";t.r(n);var r=t(33),a=t.n(r),c=t(217),l=t.n(c),s=(t(224),t(0)),o=t.n(s),i=t(22),d=t(27),u=t.p+"static/media/logo.7959c40c.svg",j=(t(226),t(218)),b=t(93),p=t(219);function h(e,n,t,r,a){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(o.a.mark((function e(n,t,r,a,c){var l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Promise((function(e,s){var o=(new p.RequestFlowBuilder).disableInjections().withRawScript('\n(xor\n (seq\n  (seq\n   (seq\n    (seq\n     (seq\n      (seq\n       (seq\n        (seq\n         (call %init_peer_id% ("getDataSrv" "-relay-") [] -relay-)\n         (call %init_peer_id% ("getDataSrv" "messageToSend") [] messageToSend)\n        )\n        (call %init_peer_id% ("getDataSrv" "targetPeerId") [] targetPeerId)\n       )\n       (call %init_peer_id% ("getDataSrv" "targetRelayPeerId") [] targetRelayPeerId)\n      )\n      (call -relay- ("op" "noop") [])\n     )\n     (xor\n      (seq\n       (call -relay- ("op" "noop") [])\n       (call "12D3KooWSD5PToNiLQwKDXsu8JSysCwUt8BVUJEqCHcDe7P5h45e" ("32e7f3e6-9f1e-4140-8281-c58bc4e59440" "char_count") [messageToSend] comp)\n      )\n      (seq\n       (call -relay- ("op" "noop") [])\n       (call %init_peer_id% ("errorHandlingSrv" "error") [%last_error% 1])\n      )\n     )\n    )\n    (call -relay- ("op" "noop") [])\n   )\n   (par\n    (seq\n     (call targetRelayPeerId ("op" "noop") [])\n     (xor\n      (call targetPeerId ("CharCountPeer" "char_count") [messageToSend] res)\n      (seq\n       (seq\n        (call targetRelayPeerId ("op" "noop") [])\n        (call -relay- ("op" "noop") [])\n       )\n       (call %init_peer_id% ("errorHandlingSrv" "error") [%last_error% 2])\n      )\n     )\n    )\n    (null)\n   )\n  )\n  (xor\n   (call %init_peer_id% ("callbackSrv" "response") [comp.$.reply!])\n   (call %init_peer_id% ("errorHandlingSrv" "error") [%last_error% 3])\n  )\n )\n (call %init_peer_id% ("errorHandlingSrv" "error") [%last_error% 4])\n)\n\n            ').configHandler((function(c){c.on("getDataSrv","-relay-",(function(){return n.relayPeerId})),c.on("getDataSrv","messageToSend",(function(){return t})),c.on("getDataSrv","targetPeerId",(function(){return r})),c.on("getDataSrv","targetRelayPeerId",(function(){return a})),c.onEvent("callbackSrv","response",(function(n){var t=Object(d.a)(n,1)[0];e(t)})),c.onEvent("errorHandlingSrv","error",(function(e){var n=Object(d.a)(e,1)[0];s(n)}))})).handleScriptError(s).handleTimeout((function(){s("Request timed out for countChars")}));c&&c.ttl&&o.withTTL(c.ttl),l=o.build()})),e.next=3,n.initiateFlow(l);case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=t(4),x=[b.krasnodar[0],b.krasnodar[1],b.krasnodar[2]];var m=function(e){navigator.clipboard.writeText(e)},f=function(){var e=Object(r.useState)(null),n=Object(d.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),l=Object(d.a)(c,2),s=l[0],b=l[1],p=Object(r.useState)(null),O=Object(d.a)(p,2),f=O[0],v=O[1],y=Object(r.useState)(""),S=Object(d.a)(y,2),N=S[0],_=S[1],w=Object(r.useState)(""),P=Object(d.a)(w,2),C=P[0],I=P[1],k=function(){var e=Object(i.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h(t,s,N,C);case 4:n=e.sent,v(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=null!==t;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("header",{children:Object(g.jsx)("img",{src:u,className:"logo",alt:"logo"})}),Object(g.jsxs)("div",{className:"content",children:[q?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Connected"}),Object(g.jsx)("table",{children:Object(g.jsxs)("tbody",{children:[Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"bold",children:"Peer id:"}),Object(g.jsx)("td",{className:"mono",children:t.selfPeerId}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{className:"btn-clipboard",onClick:function(){return m(t.selfPeerId)},children:Object(g.jsx)("i",{className:"gg-clipboard"})})})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{className:"bold",children:"Relay peer id:"}),Object(g.jsx)("td",{className:"mono",children:t.relayPeerId}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{className:"btn-clipboard",onClick:function(){return m(t.relayPeerId)},children:Object(g.jsx)("i",{className:"gg-clipboard"})})})]})]})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Intro 4: Send message and count character"}),Object(g.jsx)("p",{className:"p",children:"Now try opening a new tab with the same application. Copy paste the peer id and relay from the second tab and send your message!"}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("label",{className:"label bold",children:"Target peer id"}),Object(g.jsx)("input",{className:"input",type:"text",onChange:function(e){return _(e.target.value)},value:N})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("label",{className:"label bold",children:"Target relay"}),Object(g.jsx)("input",{className:"input",type:"text",onChange:function(e){return I(e.target.value)},value:C})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("label",{className:"label bold",children:"Text message"}),Object(g.jsx)("input",{className:"input",type:"text",placeholder:"Type your message...",onChange:function(e){return b(e.target.value)},value:s})]}),Object(g.jsx)("button",{className:"btn btn-hello",onClick:k,children:"Send hello message"})]})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Intro 3: Computing on the network"}),Object(g.jsx)("h2",{children:"Pick a relay"}),Object(g.jsx)("ul",{children:x.map((function(e){return Object(g.jsxs)("li",{children:[Object(g.jsx)("span",{className:"mono",children:e.peerId}),Object(g.jsx)("button",{className:"btn",onClick:function(){return n=e.multiaddr,void Object(j.createClient)(n).then((function(e){e.callServiceHandler.onEvent("CharCountPeer","char_count",(function(e){var n=Object(d.a)(e,1)[0];v(n)})),a(e)})).catch((function(e){return console.log("Client initialization failed",e)}));var n},children:"Connect"})]},e.peerId)}))})]}),f&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h2",{children:"Message"}),Object(g.jsxs)("div",{children:[" ",f," "]})]})]})]})};l.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(f,{})}),document.getElementById("root"))},99:function(e,n){}},[[532,1,2]]]);
//# sourceMappingURL=main.167e6fa4.chunk.js.map